<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>DAD, PUT ME IN THE GAME</title>
<script type="text/javascript" src="http://jqueryjs.googlecode.com/files/jquery-1.3.2.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0b3/jquery.mobile-1.0b3.min.css"/>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.6.3.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/mobile/1.0b3/jquery.mobile-1.0b3.min.js"></script>
<script type="text/javascript" src="http://www.modernizr.com/downloads/modernizr-latest.js"></script>
<script src="js/doNavigation.js"></script>
<link rel="stylesheet" href="style.css" />


<!-- BEGIN FEED -->
	<script src="http://www.google.com/jsapi/?key=internal-sample" type="text/javascript"></script>

    <!-- Dynamic Feed Control and Stylesheet -->
    <script src="http://www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.js" type="text/javascript"></script>
    <style type="text/css">
      @import url("http://www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css");
    </style>

 
<script type="text/javascript">
$(document).ready(function(){


});	
</script>
<style>
	p.serif {    
			font-family: "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", Geneva, Verdana, sans-serif;
			font-size: 18px;
		}		
	</style>
</head>  
    <body>    
         
        <script type="text/javascript">
            //<![CDATA[ 
			/* personalization */
			var _myCity = localStorage.getItem("A4CSportsCity");
			var _myName = localStorage.getItem("A4CSportsName");
			var _myAge = localStorage.getItem("A4CSportsAge");
			var _myTeam = localStorage.getItem("A4CTeamName");
			var _myPlayer = localStorage.getItem("A4CPlayerName");
			var strTeamFind = _myTeam.indexOf("-");
			var n = _myTeam.indexOf("-");
			var len = _myTeam.length;
			var strTeamName = _myTeam.substr(n+1, len-n);		

            /* configuration */
            var maxLength = 4;
			/* writing HTML */
            document.write(
                '<div data-role="page" id="list">' +
                '<div data-role="header" data-theme="a">' +
                '<div data-role="navbar" data-theme="c">' +
                '<ul>' +
                '<li><a href="index.html" rel="external" data-transition="slideup" data-prefetch data-icon="home"></a></li>' + 
      			'<li><a href="TeamB.html" rel="external" data-transition="slidedown" data-prefetch data-icon="arrow-l" ></a></li>' + 
				'<li><a href="S1.html" rel="external" data-transition="slidedown" data-prefetch data-icon="arrow-r"></a></li>'+ 
                '</ul>' +
                '</div>' + <!-- /navbar--> 
            '  </div>' + <!-- /header -->  
            
            '  <div data-role="content" data-theme="e">' +              
               '    <ul data-role="listview" data-filter="false" id="articleList">');
          
		   for (var i = 1; i <= 1; i++) {
                document.write(
                    <!--'<li id="list' + i + '"><a href="#article' + i + '" id="link' + i + '">&nbsp;</a></li>');-->
					'<p class="serif">Could a clue be found in the headlines from today? '+_myName +' began to read each headline for the '+strTeamName+'.</p><br/>'+
					'<p class="serif">"Hmmmm...the first headline <a href="#article' + i + '" id="link' + i + '">&nbsp;</a> just may have a clue about '+_myPlayer +'." said '+_myName +'.</p><br/>');
            }
			for (var i = 2; i <= 2; i++) {
                document.write(
                    <!--'<li id="list' + i + '"><a href="#article' + i + '" id="link' + i + '">&nbsp;</a></li>');-->
					'<p class="serif">'+_myName +' thought '+_myCity +' would definitely be in the second headline <a href="#article' + i + '" id="link' + i + '">&nbsp;</a> but no luck.</p><br/>');
            }
			for (var i = 3; i <= 3; i++) {
                document.write(
                    <!--'<li id="list' + i + '"><a href="#article' + i + '" id="link' + i + '">&nbsp;</a></li>');-->
					'<p class="serif">The '+strTeamName +' had a third headline which read <a href="#article' + i + '" id="link' + i + '">&nbsp;</a>.  "Nope.  Not that one either" said '+_myName +'.</p><br/>');
					
            }
			
			for (var i = 4; i <= 4; i++) {
                document.write(
                    <!--'<li id="list' + i + '"><a href="#article' + i + '" id="link' + i + '">&nbsp;</a></li>');-->
					'<p class="serif"> The fourth and last headline for the '+strTeamName +' was <a href="#article' + i + '" id="link' + i + '">&nbsp;</a>.</p><br/>'+
					'<p class="serif">"A-ha!"  '+_myName +' had an <img src="img/bulb.jpg" /> idea!</p><br/>');
					
			}
            document.write(
				'</ul>' +
				
				
				
				
                '  </div>' +
				'  <br/><br/><a href="TeamB.html" rel="external" data-transition="slidedown" data-prefetch><img src="img/Previous.png" /></a>' +
				'	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ' +
				'	<a href="S1.html" rel="external" data-transition="slidedown" data-prefetch><img src="img/Next.png" /></a>' +
				'  <div id="footer"><center>' +
				'		<img src="img/bannerSM.jpg" /><br/>' +
				'		&copy; Apps4Canadians' +
				'		</center>' +
				'		<br>' +
				'		<center><a href="index.html" rel="external" data-transition="slideup" data-prefetch>Home</a>- <a href="mailto:apps4canadians@live.com">Contact</a> - </center>' +
				'	</div>' +
                '</div>');
            for (i = 1; i <= maxLength; i++) {
                document.write(
                    '<div data-role="page" id="article' + i + '">' +
                    '  <div data-role="header" data-position="inline">' +
                    '    <a href="#list" data-role="button" data-icon="home" data-back="true">Return to list</a>' +
                    '    <h1 id="articleHeader' + i + '">&nbsp;</h1>' +
                    '    <a href="#" id="openButton' + i + '" data-role="button" data-icon="plus"' +
                    '      class="ui-btn-right" rel="external">Open</a>' +
                    '  </div>' +
                    '  <div data-role="content">' +
                    '    <div id="articleContent' + i + '" class="articleContent"></div>' +
                    '    <div data-role="controlgroup" data-type="horizontal">' +
                    '      <a href="#article' + String(i - 1) + '" data-role="button" data-icon="arrow-l"' +
                    '        data-inline="true" class="prevButton">Prev</a>' +
                    '      <a href="#article' + String(i + 1) + '" data-role="button" data-icon="arrow-r"' +
                    '        data-inline="true" class="nextButton" data-iconpos="right">Next</a>' +
                    '    </div>' +
                    '  </div>' +
                    '</div>');
            }
            
/* JSONP */
            
$(function() {
                
	var _myLeague = localStorage.getItem("A4CLeague");
            
                
	if (_myLeague.indexOf("nfl") > 0){
 getOnlineFeed('http://www.nfl.com/rss/rsslanding?searchString=team&abbr=' + localStorage.getItem("A4CTeamId"));
                }
                
	else if (_myLeague.indexOf("nba") > 0){
                  getOnlineFeed('http://www.nba.com/' + localStorage.getItem("A4CTeamId") + '/rss.xml');
                }
                 
	else if (_myLeague.indexOf("epl") > 0){
  
		var strEPL = localStorage.getItem("A4CTeamId");
		var strEPLUrl = "";
		if (strEPL == "CHE"){
			strEPLUrl = "chelsea";
		}
		else if (strEPL == "SH"){
			strEPLUrl = "southampton";
		}
		else if (strEPL == "MC"){
			strEPLUrl = "manchester_city";
		}
		else if (strEPL == "WHU"){
			strEPLUrl = "west_ham_united";
		}
		else if (strEPL == "ARS"){
			strEPLUrl = "arsenal";
		}
		else if (strEPL == "SWC"){
			strEPLUrl = "swansea_city";
		}
		else if (strEPL == "LIV"){
			strEPLUrl = "liverpool";
		}
		else if (strEPL == "MU"){
			strEPLUrl = "manchester_united";
		}
		else if (strEPL == "EVE"){
			strEPLUrl = "everton";
		}
		else if (strEPL == "HC"){
			strEPLUrl = "hull_city";
		}
		else if (strEPL == "TH"){
			strEPLUrl = "tottenham_hotspur";
		}
		else if (strEPL == "SC"){
			strEPLUrl = "stoke_city";
		}
		else if (strEPL == "WBA"){
			strEPLUrl = "west_bromwich_albion";
		}
		else if (strEPL == "NU"){
			strEPLUrl = "newcastle_united";
		}
		else if (strEPL == "AV"){
			strEPLUrl = "aston_villa";
		}
		else if (strEPL == "CP"){
			strEPLUrl = "crystal_palace";
		}
		else if (strEPL == "LC"){
			strEPLUrl = "leicester_city";
		}
		else if (strEPL == "SUN"){
			strEPLUrl = "sunderland";
		}
		else if (strEPL == "QPR"){
			strEPLUrl = "queens_park_rangers";
		}
		else {
			strEPLUrl = "burnley";
		}
		
               
		getOnlineFeed('http://football.co.uk/teams/' + strEPLUrl + '/rss.xml');
		//getOnlineFeed('http://football.co.uk/teams/' + localStorage.getItem("A4CTeamId") + '/rss.xml');
                }
                 
	
	else if (_myLeague.indexOf("nhl") > 0){
				 alert("NHL isn't being offered!");
                  
	//getOnlineFeed('http://www.nba.com/grizzlies/rss.xml');
                }
                 
	else if (_myLeague.indexOf("mlb") > 0){
                  getOnlineFeed('http://mlb.mlb.com/partnerxml/gen/news/rss/' +localStorage.getItem("A4CTeamId")+ '.xml');
                }
				else{
					//default to raptors on error
					getOnlineFeed('http://www.nba.com/raptors/rss.xml');
				}
            });
            

/* functions */
            
var listEntries = function(json) {
                if (!json.responseData.feed.entries) return false;
                $('#widgetTitle').text(json.responseData.feed.title);
                var articleLength = json.responseData.feed.entries.length;
                articleLength = (articleLength > maxLength) ? maxLength : articleLength;
                for (var i = 1; i <= articleLength; i++) {
                    var entry = json.responseData.feed.entries[i - 1];
                    $('#link' + i).text(entry.title);
                    $('#articleHeader' + i).text(entry.title);
                    $('#openButton' + i).attr('href', entry.link);
                    $('#articleContent' + i).append(entry.content);
                }
                $('#article1 .prevButton').remove();
                $('#article' + articleLength + ' .nextButton').remove();
                if (articleLength < maxLength) {
                    for (i = articleLength + 1; i <= maxLength; i++) {
                        $('#list' + i).remove();
                        $('#article' + i).remove();
                    }
                }
            };
            var getOnlineFeed = function(url) {
                var script = document.createElement('script');
                script.setAttribute('src', 'http://ajax.googleapis.com/ajax/services/feed/load?callback=listEntries&hl=ja&output=json-in-script&q=' + encodeURIComponent(url) + '&v=1.0&num=' + maxLength + '&scoring=h');
                script.setAttribute('type', 'text/javascript');
                document.documentElement.firstChild.appendChild(script);
            };
            var getOfflineFeed = function(url) {
                var script = document.createElement('script');
                script.setAttribute('src', url);
                script.setAttribute('type', 'text/javascript');
                document.documentElement.firstChild.appendChild(script);
            };
            //]]>
        </script>
       
    </body>

</HTML>